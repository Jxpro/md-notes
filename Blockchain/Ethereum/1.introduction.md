# 以太坊简介

[TOC]

## 一、以太坊特点

-   以太坊是“**世界计算机**”，这代表它是一个**开源**的、**全球分布**的**计算基础设施**
-   执行称为**智能合约**（smart contract）的程序
-   使用区块链来同步和存储系统状态以及名为以太币（ether）的加密货币，以计量和约束执行资源成本
-   本质是一个**基于交易的状态机**（transaction-based state machine）
-   以太坊平台使开发人员能够构建具有内置经济功能的强大去**中心化应用程序**（DApp）；在持续自我正常运行的同时，它还减少或消除了审查，第三方界面和交易对手风险

## 二、以太坊的组成部分

-   P2P网络
    以太坊在以太坊主网络上运行，该网络可在TCP**端口30303**上寻址，并运行一个名为`ÐΞVp2p`的协议。
-   交易（Transaction）
    以太坊交易是网络消息，其中包括发送者（sender），接收者（receiver），值（value） 和数据的**有效载荷**（payload）。
-   以太坊虚拟机（EVM）
    以太坊状态转换由**以太坊虚拟机**（EVM）处理，这是一个执行字节码（机器语言指令）的 基于堆栈的虚拟机。
-   数据库（Blockchain）
    以太坊的**区块链**作为数据库（通常是 Google 的`LevelDB`）本地存储在每个节点上，包含 序列化后的交易和系统状态。
-   客户端
    以太坊有几种可互操作的客户端软件实现，其中最突出的是 Go-Ethereum（Geth）和 Parity

## 三、以太币各单位名称

![image-20211127102115349](https://gitee.com/jxprog/PicBed/raw/master/md/2021/11/2021-11-27-102116.png)

## 四、重要概念

-   账户（Account）
    包含**地址，余额和随机数**，以及可选的存储和代码的对象。
    -   普通账户（**EOA**），存储和代码均为空
    -   合约账户（**Contract**），包含存储和代码
-   地址（Address）
    一般来说，这代表一个EOA或合约，它可以在区块链上接收或发送交易。 更具体地说，它是**ECDSA** 公钥的 **keccak 散列** 的最右边的160位。
-   交易（Transaction）
    -   可以发送以太币和信息
    -   向合约发送的交易可以调用合约代码，并**以信息数据为函数参数**
    -   向空用户发送信息，可以自动**生成**以信息为代码块的**合约账户**
-   gas
    以太坊用于执行智能合约的虚拟燃料，以太坊虚拟机使用核算机制来衡量 gas的消耗量并**限制计算资源的消耗**

## 五、挖矿产出

-   区块奖励（Block rewards）
    每产生一个新区块就会有一笔固定的奖励给矿工，初始是5个以太币，现在是3个。
-   叔块奖励（Uncle rewards）
    有些区块被挖得稍晚一些，因此不能作为主区块链的组成部分。比特币称这类区块为“**孤块**”，并且完全舍弃它们。但是，以太币称它们为“**叔块**”（uncles），并且在之后的区块中，可以引用它们。如果叔块在之后的区块链中作为叔块被引用，每个叔块会为挖矿者产出区块奖励的7/8。这被称之为叔块奖励。
-   叔块引用奖励（Uncle referencing rewards）
    矿工每引用一个叔块，可以得到区块奖励的1/32作为奖励（**最多引用两个叔块**）

>   这样的一套基于POW的奖励机制，被称为以太坊的“幽灵协议（GHOST）”

## 六、幽灵协议（GHOST）

由于以太坊出块时间**设计为12秒**，实际14~15秒左右（由于网络延迟），所以快速确认会带来区块的高作废率，由此链的安全性也会降低

“幽灵”协议：**Greedy Heaviest Observed SubTree**, ”GHOST” ：

-   计算工作量证明时，不仅包括当前区块的祖区块，父区块，还要包括祖先块的作废的后代区块（“叔块”），将他们进行综合考虑。
-   目前的协议要求下探到第七层（最早的简版设计是五层），也就是说，废区块只能以叔区块的身份被其父母的第二代至第七代后辈区块引用，而不能是更远关系的后辈区块。
-   以太坊付给以“叔区块”身份为新块确认作出贡献的废区块7/8的奖励，把它们纳入计算的“侄子区块”将获得区块奖励的1/32，不过，交易费用不会奖励给叔区块。

## 七、代币（Token）

代币（token）也称作通证，本意为“令牌”，代表有所有权的资产、 货币、权限等在区块链上的抽象

-   可替代性通证（fungible token）：指的是基于区块链技术发行的， 互相可以替代的，可以接近无限拆分的token
-   非同质通证（non-fungible token）： 指的是基于区块链技术发行的， 唯一的，不可替代的，大多数情况下不可拆分的token，如加密猫 （CryptoKitties）

## 八、名词解释

-   **EIP**：Ethereum Improvement Proposals，以太坊改进建议
-   **ERC**：Ethereum Request for Comments的缩写，以太坊征求意见。一些EIP被标记为ERC，表示试图定义以太坊使用的特定标准的提议
-   **EOA**：External Owned Account，外部账户。由以太坊网络的人类用户创建的账户
-   **Ethash**：以太坊1.0 的工作量证明算法。
-   **HD钱包**：使用分层确定性（HD protocol）密钥创建和转账协议（BIP32）的钱包。
-   **Keccak256**：以太坊中使用的密码哈希函数。Keccak256 被标准化 为SHA-3
-   **Nonce**：在密码学中，术语nonce用于指代只能使用一次的值。以太坊使用两种类型的随机数，账户随机数和POW随机数